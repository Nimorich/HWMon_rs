// Преобразует 16-битное число из формата Linear11 в число с плавающей точкой
// Linear11 формат: 5 бит экспоненты (биты 11-15) и 11 бит мантиссы (биты 0-10)
// Оба значения представлены в дополнительном коде (two's complement)
pub fn from_linear11_f(data: u16) -> f32 {
    // Если данные равны 0, сразу возвращаем 0.0
    if data == 0 {
        return 0.0;
    }
    
    // Извлекаем экспоненту (биты 11-15) и мантиссу (биты 0-10)
    let exponent = ((data >> 11) & 0x001F) as i16;
    let mut mantissa = (data & 0x07FF) as i16;
    
    // Расширяем знак экспоненты (5-битное число со знаком)
    // Если старший бит экспоненты установлен (значение > 15), это отрицательное число
    let exponent = if exponent > 0x0F {
        exponent | (0xFFE0u16 as i16)  // Отрицательное число - расширяем знак
    } else {
        exponent  // Положительное число
    };
    
    // Расширяем знак мантиссы (11-битное число со знаком)
    // Если старший бит мантиссы установлен (значение > 1023), это отрицательное число
    if mantissa > 0x03FF {
        mantissa |= 0xF800u16 as i16;  // Отрицательное число - расширяем знак
    }
    
    // Вычисляем финальное значение: мантисса * 2^экспонента
    if exponent >= 0 {
        (mantissa as f32) * ((1 << exponent) as f32)  // Положительная экспонента - умножение
    } else {
        (mantissa as f32) / ((1 << -exponent) as f32)  // Отрицательная экспонента - деление
    }
}